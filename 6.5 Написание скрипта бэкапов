Создадим скрипт, который бэкапит сайт и всю его БД

Создаем пустой скрипт: touch backup.sh
Меняем права файлу: chmod u+x (добавили исполнение)
Откроем на редактирование: mcedit ./backup.sh

Внутри файла:

#!/bin/bash

###### PARAMETERS  ######
BACKUP_DATA_DIR=/home/skillbox/backup  # директория для хранения бэкапов
BACKUP_DIR=BACKUP_DATA_DIR/$(data +%Y%m%d_%H%M%S)  # новая подпапка под бекап
DIRECTORIES="/home/skillbox/data/ /home/skillbox/config/"
DBUSER=root
DBPASS=s15dg4fd21d5g4
DAYS_TO_STORE=30
###### /PARAMETERS ######

echo "Started at: "$(date)  # выведем время начала работы
mkdir $BACKUP_DIR           # создаем папку, уникальную временем создания

# Making andarchivation DB

mysqldump --opt -u $DBUSER -p$DBPASS --events --all-database > BACKUP_DIR/all.sgl 
  создаем дамп специальной прогой mysqldump, ключ opt загружает все необходимые опции
  ключ -u указывает на пользователя, ключ -р на его пароль, --all - все доступные
  пользователю БД, перенаправление в файл

tar -cjf $BACKUP_DIR/all.sgl.tbz -c $BACKUP_DIR/ all.sgl 
  tar - прога для архивирования, ключ с - create, ключ j - формат сжатия архива (bzip2),
  ключ f -?, $BACKUP_DIR/all.sgl.tbz - файл на выходе, -С указывает на следующую по тексту папку,
  далее файл для архивации
  Если забыть -С то заархивирует все от корня, не только эту папку
  
rm $BACKUP_DIR/all.sgl  

echo "Finished" - архивация завершена

# Making directory backup
echo "directory backup"  # отразим в потоке вывода, что начали бэкап папок

for DIRNAME in $DIRECTORIES
do
  echo "Backupping $DIRNAME"
  cd $DIRNAME   # перейдем в папку для бэкапа
  FILENAME=`echo $DIRNAME | sed 's/[\/]/\_/g' | sed 's/^\_\+\|\_\+$//g'`  # команда заменяет / на _ и удаляет _
  tar -cif $BACKUP_DIR/$FILENAME.tbz ./ # создадим архив 
done
echo "Finished"

#Change mode
chmod -R 700 $BACKUP_DIR

#Removing old directories
cd $BACKUP_DATA_DIR
find ./* -type d -mtime +$DAYS_TO_STORE | xargs -r rm -R

echo -e "Finished at "$(date)"\n"


DAYS_TO_STORE
Регулярка:
| - ИЛИ
^ - начало строки
$ - конец строки
