Создадим сервер и создадим одностраничник.

Веб-сервер - в общем, программа, которая отвечает на запросы пользователя. Состоит из двух частей: 
фмизическая машина (сервер) и программа-сервер (веб-сервер).
Не путаем, веб-сервер - слушает порты и в настройках можно указать какие именно 
(если меняем, то айпи тоже меняем).

Есть Пользователь, который в браузере вводит адрес сайта 
Есть сервер, на котором этот сайт расположен (его файлы, код, БД)
Есть IP-адрес, который определяется по адресу сайта (соответствие хранят DNS-сервера)

То есть Браузер получает от Пользователя адрес сайта, обращается на DNS и получает IP-адрес,
и по этому адресу уже обращается на сервер. Сервер получает запрос, причем на конце IP адреса
после : есть номер порта, к которому обращается браузер. По умолч., это порт 80 для http 
и 443 для https (перед ним в браузере стоит замочек, защищенное соединение).

Веб сервер это программа, как мы выяснили выше. Она запущена, работает 
и постоянно слушает запросы на определенных портах.

Получив запрос, веб-сервер его обрабатывает и возвращает ответ.
Например, я запросила главную страницу сайта. Сервер ищет где она, формирует контент из БД 
по алгоритмам и отдает обратно в браузер.

Установка Apache: apt-get install apache2 (с записи вышла новая версия)
Готово, установлен.

Теперь создадим одностраничник, чтобы нацелить на него веб-сервер Apache

1. Сайты принято создавать в определенной папке, перейдем: cd /var/www/ 
2. Просмотрим содержимое: ll
   Видим папку /html
3. (Автор курса установил на сайте своей студии соответствие домена skillbox.net-page.ru 
    IP-адресу, на котором мы сейчас работаем)
    Узнаем IP, отправив команду, которая получает ответ и печатает его, если есть и дает отчет
    по времени: ping skillbox.net-page.ru
4. Создадим папку сайта, название по домену: mkdir skillbox.net-page.ru
5. Перейдем в нее: cd skillbox.net-page.ru
6. В папке сайта создадим еще папку - корневую. Чтобы получить возможность хранить там не
   являющееся сайтом, но к нему относящееся (логи, бекапы ...)
7. Создадим index.html: mcedit index.html   
8. Впишем test image и сохраним
9. Пора настраивать сервер. Перейдем в папку с конфигурацией веб-сервера Apache: cd /etc/apache2
10. Посмотрим содержимое: ll 
11. Из всего полученного списка нам интересны: 
    - sites-available (доступные, конфиги всех сайтов сервера) 
    - sites-enabled (активированные, ссылки на файлы из первой папки, сайты которых активированы)
12. Перейдем в: cd sites-available  
13. Посмотрим что есть: ll 
    Нашли два файла с конфигурацией по умолчанию: 000-default.conf (для http) и default-ssl.conf (для https)
14. Создадим копию (назовем по имени домена): cp 000-default.conf skillbox.net-page.ru.conf
15. Откроем его на редактирование: mcedit skillbox.net-page.ru.conf
    Обратим внимание, что он настроен на порт 80 (<VirtualHost *:80>) - без повода не трогаем
    
    Поменяем настройки:
    - ServerName skillbox.net-page.ru (подменяли и раскомментили)
    - ServerAdmin (живую почту)
    - DocumentRoot /var/www/skillbox.net-page.ru/www (путь к корневой папке сайта)
    - ErroLog skillbox.net-page.ru-error.log (заменили error.log)
    - CustomLog skillbox.net-page.ru-access.log (заменили access.log ), где combined - формат записи логов, уровень логирования
   Создадим настройки корневой папки, допишем:
    
    <Directory "/var/www/skillbox.net-page.ru/www">
        DirectoryIndex index.html index.htm (имя файлов по умолчанию, который откроется)
        Options -Indexes (запрещает отображение списка файлов и папок, если в них нет файла index.html)
                         (закрывает печать в браузер по ссылке /<имя папки без .html файла>)
        Require all granted (доступ открыт всем, закрыть - denied; valid user - авторизация пользователя через браузер)                 
                          (all denied закрывает прямой доступ к системным файлам, конфигам, скачиванию видео)
    </Directory>

16. Активация сайта: a2ensite skillbox.ner-page.ru.conf (a2ensite - apache2 enable site)
    После этого появится ссылка в папке sites-enabled
17. Удалим страницу по умолчанию: кь 000-default.conf   
17. Перезапустим сервер: service apache2 reload
18. Откроем ссылку на сайт в браузере - увидим test page
19. Нажмем F12 в браузере, откроется web-inspector, вкладка network - в нем номер порта, имя сервера и пр.

